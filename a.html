<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <title>迷宮 + 光照效果</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(180deg, #001f3f, #000000);
            height: 100vh;
            overflow: hidden;
        }

        canvas {
            background: transparent;
            display: block;
            margin: 0 auto;
        }

        #success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            color: white;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.8s ease;
            pointer-events: none;
            text-shadow: 0 0 20px white;
        }

        #success.show {
            opacity: 1;
        }
    </style>
</head>

<body>
<canvas id="mazeCanvas"></canvas>
<div id="success">成功</div>

    // === Canvas ===
const canvas = document.getElementById("mazeCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// 迷宮設定
const COLS = 30;
const ROWS = 20;
const CELL = 40;

// 光圈位置
let lightX = canvas.width / 2;
let lightY = canvas.height / 2;
let lightRadius = 180;

// 終點
const finishX = (COLS - 1) * CELL + CELL / 2;
const finishY = (ROWS - 1) * CELL + CELL / 2;

const successEl = document.getElementById("success");

// 建立迷宮網格
function createGrid() {
    const grid = [];
    for (let r = 0; r < ROWS; r++) {
        const row = [];
        for (let c = 0; c < COLS; c++) {
            row.push({
                r, c,
                walls: { top: true, right: true, bottom: true, left: true },
                visited: false
            });
        }
        grid.push(row);
    }
    return grid;
}

let grid = createGrid();

// DFS 生成迷宮
function generateMaze() {
    const stack = [];
    let current = grid[0][0];
    current.visited = true;

    while (true) {
        const neighbors = [];
        const { r, c } = current;

        if (r > 0 && !grid[r - 1][c].visited) neighbors.push(grid[r - 1][c]);
        if (c < COLS - 1 && !grid[r][c + 1].visited) neighbors.push(grid[r][c + 1]);
        if (r < ROWS - 1 && !grid[r + 1][c].visited) neighbors.push(grid[r + 1][c]);
        if (c > 0 && !grid[r][c - 1].visited) neighbors.push(grid[r][c - 1]);

        if (neighbors.length > 0) {
            con


</body>
</html>
